import{S as ie,i as se,s as ue,k as f,a as O,q as P,a1 as ce,l as h,h as d,c as A,m as E,r as j,n as b,C as r,b as J,E as ee,J as de,F as _e,o as fe,H as he,a2 as D,I as te,D as C,a3 as pe,K as me,L as ve}from"../chunks/index.958f6a32.js";import{b as be,u as Ee}from"../chunks/auth.77106225.js";import{n as ge}from"../chunks/notificationStore.e8f881ab.js";import{t as Te}from"../chunks/index.a9363749.js";const Me=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function ae(l,c,a){const s=l.slice();return s[8]=c[a],s[9]=c,s[10]=a,s}function re(l){let c,a,s,n,g,_,U,p,i,o,e,t,u,N,T,m,I,R,L,V,M,q,w,k,F,H,z,K;function le(){l[2].call(_,l[9],l[10])}function oe(){l[3].call(e,l[9],l[10])}function G(){l[4].call(m,l[9],l[10])}function ne(){return l[5](l[8])}return{c(){c=f("div"),a=f("form"),s=f("label"),n=P("Nom d'utilisateur"),g=O(),_=f("input"),U=O(),p=f("label"),i=P("Email"),o=O(),e=f("input"),t=O(),u=f("label"),N=P("Rôle"),T=O(),m=f("select"),I=f("option"),R=P("Utilisateur"),L=f("option"),V=P("Admin"),M=f("option"),q=P("Modérateur"),w=O(),k=f("button"),F=P("Mettre à jour"),H=O(),this.h()},l(S){c=h(S,"DIV",{class:!0});var y=E(c);a=h(y,"FORM",{});var v=E(a);s=h(v,"LABEL",{for:!0});var Q=E(s);n=j(Q,"Nom d'utilisateur"),Q.forEach(d),g=A(v),_=h(v,"INPUT",{id:!0,type:!0}),U=A(v),p=h(v,"LABEL",{for:!0});var W=E(p);i=j(W,"Email"),W.forEach(d),o=A(v),e=h(v,"INPUT",{id:!0,type:!0}),t=A(v),u=h(v,"LABEL",{for:!0});var X=E(u);N=j(X,"Rôle"),X.forEach(d),T=A(v),m=h(v,"SELECT",{id:!0});var B=E(m);I=h(B,"OPTION",{});var Y=E(I);R=j(Y,"Utilisateur"),Y.forEach(d),L=h(B,"OPTION",{});var Z=E(L);V=j(Z,"Admin"),Z.forEach(d),M=h(B,"OPTION",{});var $=E(M);q=j($,"Modérateur"),$.forEach(d),B.forEach(d),w=A(v),k=h(v,"BUTTON",{type:!0});var x=E(k);F=j(x,"Mettre à jour"),x.forEach(d),v.forEach(d),H=A(y),y.forEach(d),this.h()},h(){b(s,"for","username"),b(_,"id","username"),b(_,"type","text"),b(p,"for","email"),b(e,"id","email"),b(e,"type","email"),b(u,"for","role"),I.__value="user",I.value=I.__value,L.__value="admin",L.value=L.__value,M.__value="moderator",M.value=M.__value,b(m,"id","role"),l[8].role===void 0&&he(G),b(k,"type","submit"),b(c,"class","page-container")},m(S,y){J(S,c,y),r(c,a),r(a,s),r(s,n),r(a,g),r(a,_),D(_,l[8].username),r(a,U),r(a,p),r(p,i),r(a,o),r(a,e),D(e,l[8].email),r(a,t),r(a,u),r(u,N),r(a,T),r(a,m),r(m,I),r(I,R),r(m,L),r(L,V),r(m,M),r(M,q),te(m,l[8].role,!0),r(a,w),r(a,k),r(k,F),r(c,H),z||(K=[C(_,"input",le),C(e,"input",oe),C(m,"change",G),C(a,"submit",pe(ne))],z=!0)},p(S,y){l=S,y&1&&_.value!==l[8].username&&D(_,l[8].username),y&1&&e.value!==l[8].email&&D(e,l[8].email),y&1&&te(m,l[8].role)},d(S){S&&d(c),z=!1,me(K)}}}function Ue(l){let c,a,s,n,g,_,U,p=l[0],i=[];for(let o=0;o<p.length;o+=1)i[o]=re(ae(l,p,o));return{c(){c=f("meta"),a=O(),s=f("div"),n=f("div"),g=f("h1"),_=P("Tableau de bord administrateur"),U=O();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){const e=ce("svelte-jic9p0",document.head);c=h(e,"META",{name:!0,content:!0}),e.forEach(d),a=A(o),s=h(o,"DIV",{class:!0});var t=E(s);n=h(t,"DIV",{class:!0});var u=E(n);g=h(u,"H1",{});var N=E(g);_=j(N,"Tableau de bord administrateur"),N.forEach(d),U=A(u);for(let T=0;T<i.length;T+=1)i[T].l(u);u.forEach(d),t.forEach(d),this.h()},h(){document.title="exemple Page",b(c,"name","description"),b(c,"content","meta description for about page."),b(n,"class","page-container"),b(s,"class","page")},m(o,e){r(document.head,c),J(o,a,e),J(o,s,e),r(s,n),r(n,g),r(g,_),r(n,U);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null)},p(o,[e]){if(e&3){p=o[0];let t;for(t=0;t<p.length;t+=1){const u=ae(o,p,t);i[t]?i[t].p(u,e):(i[t]=re(u),i[t].c(),i[t].m(n,null))}for(;t<i.length;t+=1)i[t].d(1);i.length=p.length}},i:ee,o:ee,d(o){d(c),o&&d(a),o&&d(s),de(i,o)}}}function ye(l,c,a){let s;_e(l,Te,e=>a(6,s=e));let n=[];function g(){be().then(e=>{a(0,n=e.filter(t=>t!=null))}).catch(e=>{console.error("Erreur lors de la récupération des utilisateurs:",e)})}fe(async()=>{try{await g()}catch(e){console.error("Error:",e)}});async function _(e){const t=n.find(u=>(u==null?void 0:u._id)===e);if(!t){console.error("Utilisateur à mettre à jour introuvable");return}try{const{user:u,notification:N}=await Ee(e,t,s),T=n.findIndex(m=>m._id===e);T!==-1&&(a(0,n[T]=u,n),ge.addNotification(`Utilisateur mis à jour avec succès ${N}`,"success"))}catch(u){console.error("Error:",u)}}function U(e,t){e[t].username=this.value,a(0,n)}function p(e,t){e[t].email=this.value,a(0,n)}function i(e,t){e[t].role=ve(this),a(0,n)}return[n,_,U,p,i,e=>_(e._id)]}class Pe extends ie{constructor(c){super(),se(this,c,ye,Ue,ue,{})}}export{Pe as component,Me as universal};
