import{_ as d}from"./preload-helper.a4192956.js";import{w as P,d as E}from"./index.d28b6c62.js";import{ab as p}from"./index.958f6a32.js";var ue=Object.defineProperty,ce=Object.defineProperties,de=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,z=(r,t,e)=>t in r?ue(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,c=(r,t)=>{for(var e in t||(t={}))U.call(t,e)&&z(r,e,t[e]);if(D)for(var e of D(t))X.call(t,e)&&z(r,e,t[e]);return r},v=(r,t)=>ce(r,de(t)),T=(r,t)=>{var e={};for(var a in r)U.call(r,a)&&t.indexOf(a)<0&&(e[a]=r[a]);if(r!=null&&D)for(var a of D(r))t.indexOf(a)<0&&X.call(r,a)&&(e[a]=r[a]);return e},F=["error","warn","debug"],Y=({logger:r=console,level:t=F[1],prefix:e="[i18n]: "})=>F.reduce((a,l,o)=>v(c({},a),{[l]:i=>F.indexOf(t)>=o&&r[l](`${e}${i}`)}),{}),f=Y({}),pe=r=>{f=r},H=r=>{var t=r,{parser:e,key:a,params:l,translations:o,locale:i,fallbackLocale:s}=t,u=T(t,["parser","key","params","translations","locale","fallbackLocale"]);if(!a)return f.warn(`No translation key provided ('${i}' locale). Skipping translation...`),"";if(!i)return f.warn(`No locale provided for '${a}' key. Skipping translation...`),"";let n=(o[i]||{})[a];return s&&n===void 0&&(n=(o[s]||{})[a]),u.hasOwnProperty("fallbackValue")&&n===void 0?u.fallbackValue:e.parse(n,l,i,a)},b=(...r)=>r.length?r.filter(t=>!!t).map(t=>{let e=`${t}`.toLowerCase();try{let[a]=Intl.Collator.supportedLocalesOf(t);if(!a)throw new Error;e=a}catch{f.warn(`'${t}' locale is non-standard.`)}return e}):[],j=(r,t,e)=>{if(t&&Array.isArray(r))return r.map(a=>j(a,t));if(r&&typeof r=="object"){let a=Object.keys(r).reduce((l,o)=>{let i=r[o],s=e?`${e}.${o}`:`${o}`;return i&&typeof i=="object"&&!(t&&Array.isArray(i))?c(c({},l),j(i,t,s)):v(c({},l),{[s]:j(i,t)})},{});return Object.keys(a).length?a:null}return r},fe=r=>r.reduce((t,{key:e,data:a,locale:l})=>{if(!a)return t;let[o]=b(l),i=v(c({},t[o]||{}),{[e]:a});return v(c({},t),{[o]:i})},{}),me=async r=>{try{let t=await Promise.all(r.map(e=>{var a=e,{loader:l}=a,o=T(a,["loader"]);return new Promise(async i=>{let s;try{s=await l()}catch(u){f.error(`Failed to load translation. Verify your '${o.locale}' > '${o.key}' Loader.`),f.error(u)}i(v(c({loader:l},o),{data:s}))})}));return fe(t)}catch(t){f.error(t)}return{}},ye=r=>t=>{try{if(typeof t=="string")return t===r;if(typeof t=="object")return t.test(r)}catch{f.error("Invalid route config!")}return!1},q=(r,t)=>{let e=!0;try{e=Object.keys(r).filter(a=>r[a]!==void 0).every(a=>r[a]===t[a])}catch{}return e},W=1e3*60*60*24,he=class{constructor(t){this.cachedAt=0,this.loadedKeys={},this.currentRoute=P(),this.config=P(),this.isLoading=P(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(e,a)=>{let{fallbackLocale:l}=p(this.config),o=Array.from(this.promises).filter(i=>{let s=q({locale:b(e)[0],route:a},i);return l&&(s=s||q({locale:b(l)[0],route:a},i)),s}).map(({promise:i})=>i);return Promise.all(o)},get:()=>p(this.isLoading)},this.privateRawTranslations=P({}),this.rawTranslations={subscribe:this.privateRawTranslations.subscribe,get:()=>p(this.rawTranslations)},this.privateTranslations=P({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>p(this.translations)},this.locales=v(c({},E([this.config,this.privateTranslations],([e,a])=>{if(!e)return[];let{loaders:l=[]}=e,o=l.map(({locale:s})=>s),i=Object.keys(a).map(s=>s);return Array.from(new Set([...b(...o),...b(...i)]))},[])),{get:()=>p(this.locales)}),this.internalLocale=P(),this.loaderTrigger=E([this.internalLocale,this.currentRoute],([e,a],l)=>{var o,i;e!==void 0&&a!==void 0&&!(e===((o=p(this.loaderTrigger))==null?void 0:o[0])&&a===((i=p(this.loaderTrigger))==null?void 0:i[1]))&&(f.debug("Triggering translation load..."),l([e,a]))},[]),this.localeHelper=P(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>p(this.locale)},this.initialized=E([this.locale,this.currentRoute,this.privateTranslations],([e,a,l],o)=>{p(this.initialized)||o(e!==void 0&&a!==void 0&&!!Object.keys(l).length)}),this.translation=E([this.privateTranslations,this.locale,this.isLoading],([e,a,l],o)=>{let i=e[a];i&&Object.keys(i).length&&!l&&o(i)},{}),this.t=v(c({},E([this.config,this.translation],e=>{var[a]=e,l=a,{parser:o,fallbackLocale:i}=l,s=T(l,["parser","fallbackLocale"]);return(u,...n)=>H(c({parser:o,key:u,params:n,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:i},s.hasOwnProperty("fallbackValue")?{fallbackValue:s.fallbackValue}:{}))})),{get:(e,...a)=>p(this.t)(e,...a)}),this.l=v(c({},E([this.config,this.translations],e=>{var[a,...l]=e,o=a,{parser:i,fallbackLocale:s}=o,u=T(o,["parser","fallbackLocale"]),[n]=l;return(m,y,..._)=>H(c({parser:i,key:y,params:_,translations:n,locale:m,fallbackLocale:s},u.hasOwnProperty("fallbackValue")?{fallbackValue:u.fallbackValue}:{}))})),{get:(e,a,...l)=>p(this.l)(e,a,...l)}),this.getLocale=e=>{let{fallbackLocale:a}=p(this.config)||{},l=e||a;if(!l)return;let o=this.locales.get();return o.find(i=>b(l).includes(i))||o.find(i=>b(a).includes(i))},this.setLocale=e=>{if(e&&e!==p(this.internalLocale))return f.debug(`Setting '${e}' locale.`),this.internalLocale.set(e),this.loading.toPromise(e,p(this.currentRoute))},this.setRoute=e=>{if(e!==p(this.currentRoute)){f.debug(`Setting '${e}' route.`),this.currentRoute.set(e);let a=p(this.internalLocale);return this.loading.toPromise(a,e)}},this.loadConfig=async e=>{await this.configLoader(e)},this.getTranslationProps=async(e=this.locale.get(),a=p(this.currentRoute))=>{let l=p(this.config);if(!l||!e)return[];let o=this.translations.get(),{loaders:i,fallbackLocale:s="",cache:u=W}=l||{},n=Number.isNaN(+u)?W:+u;this.cachedAt?Date.now()>n+this.cachedAt&&(f.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(f.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[m,y]=b(e,s),_=o[m],V=o[y],L=(i||[]).map(h=>{var k=h,{locale:R}=k,g=T(k,["locale"]);return v(c({},g),{locale:b(R)[0]})}).filter(({routes:h})=>!h||(h||[]).some(ye(a))).filter(({key:h,locale:k})=>k===m&&(!_||!(this.loadedKeys[m]||[]).includes(h))||s&&k===y&&(!V||!(this.loadedKeys[y]||[]).includes(h)));if(L.length){this.isLoading.set(!0),f.debug("Fetching translations...");let h=await me(L);this.isLoading.set(!1);let k=Object.keys(h).reduce((g,w)=>v(c({},g),{[w]:Object.keys(h[w])}),{}),R=L.filter(({key:g,locale:w})=>(k[w]||[]).some(A=>`${A}`.startsWith(g))).reduce((g,{key:w,locale:A})=>v(c({},g),{[A]:[...g[A]||[],w]}),{});return[h,R]}return[]},this.addTranslations=(e,a)=>{if(!e)return;let l=p(this.config),{preprocess:o}=l||{};f.debug("Adding translations...");let i=Object.keys(e||{});this.privateRawTranslations.update(s=>i.reduce((u,n)=>v(c({},u),{[n]:c(c({},u[n]||{}),e[n])}),s)),this.privateTranslations.update(s=>i.reduce((u,n)=>{let m=!0,y=e[n];return typeof o=="function"&&(y=o(y)),(typeof o=="function"||o==="none")&&(m=!1),v(c({},u),{[n]:c(c({},u[n]||{}),m?j(y,o==="preserveArrays"):y)})},s)),i.forEach(s=>{let u=Object.keys(e[s]).map(n=>`${n}`.split(".")[0]);a&&(u=a[s]),this.loadedKeys[s]=Array.from(new Set([...this.loadedKeys[s]||[],...u||[]]))})},this.loader=async([e,a])=>{let l=this.getLocale(e)||void 0;f.debug(`Adding loader promise for '${l}' locale and '${a}' route.`);let o=(async()=>{let i=await this.getTranslationProps(l,a);i.length&&this.addTranslations(...i)})();this.promises.add({locale:l,route:a,promise:o}),o.then(()=>{l&&this.locale.get()!==l&&this.locale.forceSet(l)})},this.loadTranslations=(e,a=p(this.currentRoute)||"")=>{let l=this.getLocale(e);if(l)return this.setRoute(a),this.setLocale(l),this.loading.toPromise(l,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async e=>{e&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),f.debug("Loader promises have been purged."))}),t&&this.loadConfig(t)}async configLoader(t){if(!t)return f.error("No config provided!");let e=t,{initLocale:a,fallbackLocale:l,translations:o,log:i}=e,s=T(e,["initLocale","fallbackLocale","translations","log"]);i&&pe(Y(i)),[a]=b(a),[l]=b(l),f.debug("Setting config."),this.config.set(c({initLocale:a,fallbackLocale:l,translations:o},s)),o&&this.addTranslations(o),a&&await this.loadTranslations(a)}},Z=Object.defineProperty,ve=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,B=(r,t,e)=>t in r?Z(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,O=(r,t)=>{for(var e in t||(t={}))ee.call(t,e)&&B(r,e,t[e]);if(I)for(var e of I(t))ae.call(t,e)&&B(r,e,t[e]);return r},K=(r,t)=>ve(r,ge(t)),$=(r,t)=>{var e={};for(var a in r)ee.call(r,a)&&t.indexOf(a)<0&&(e[a]=r[a]);if(r!=null&&I)for(var a of I(r))t.indexOf(a)<0&&ae.call(r,a)&&(e[a]=r[a]);return e},be=(r,t)=>{for(var e in t)Z(r,e,{get:t[e],enumerable:!0})},te={};be(te,{ago:()=>Ee,currency:()=>Te,date:()=>Le,eq:()=>M,gt:()=>le,gte:()=>Oe,lt:()=>re,lte:()=>ke,ne:()=>_e,number:()=>we});var S=(r,t)=>{let{modifierDefaults:e}=t||{},{[r]:a}=e||{};return a||{}},M=({value:r,options:t=[],defaultValue:e=""})=>(t.find(({key:a})=>`${a}`.toLowerCase()===`${r}`.toLowerCase())||{}).value||e,_e=({value:r,options:t=[],defaultValue:e=""})=>(t.find(({key:a})=>`${a}`.toLowerCase()!==`${r}`.toLowerCase())||{}).value||e,re=({value:r,options:t=[],defaultValue:e=""})=>(t.sort((a,l)=>+a.key-+l.key).find(({key:a})=>+r<+a)||{}).value||e,le=({value:r,options:t=[],defaultValue:e=""})=>(t.sort((a,l)=>+l.key-+a.key).find(({key:a})=>+r>+a)||{}).value||e,ke=({value:r,options:t=[],defaultValue:e=""})=>M({value:r,options:t,defaultValue:re({value:r,options:t,defaultValue:e})}),Oe=({value:r,options:t=[],defaultValue:e=""})=>M({value:r,options:t,defaultValue:le({value:r,options:t,defaultValue:e})}),we=({value:r,props:t,defaultValue:e="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=S("number",l),{maximumFractionDigits:i}=o,s=$(o,["maximumFractionDigits"]),u=(t==null?void 0:t.number)||{},{maximumFractionDigits:n=i||2}=u,m=$(u,["maximumFractionDigits"]);return new Intl.NumberFormat(a,O(K(O({},s),{maximumFractionDigits:n}),m)).format(+r||+e)},Le=({value:r,props:t,defaultValue:e="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=$(S("date",l),[]),i=$((t==null?void 0:t.date)||{},[]);return new Intl.DateTimeFormat(a,O(O({},o),i)).format(+r||+e)},C=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],oe=(r="",t="")=>new RegExp(`^${r}s?$`).test(t),$e=r=>C.indexOf(C.find(({key:t})=>oe(t,r))),Pe=(r,t)=>C.reduce(([e,a],{key:l,multiplier:o},i)=>{if(oe(a,t))return[e,a];if(!a||i===$e(a)+1){let s=Math.round(e/o);if(!a||Math.abs(s)>=1||t!=="auto")return[s,l]}return[e,a]},[r,""]),Ee=({value:r,defaultValue:t="",locale:e="",props:a,parserOptions:l})=>{if(!e)return"";let o=S("ago",l),{format:i,numeric:s}=o,u=$(o,["format","numeric"]),n=(a==null?void 0:a.ago)||{},{format:m=i||"auto",numeric:y=s||"auto"}=n,_=$(n,["format","numeric"]),V=+r||+t,L=Pe(V,m);return new Intl.RelativeTimeFormat(e,O(K(O({},u),{numeric:y}),_)).format(...L)},Te=({value:r,defaultValue:t="",locale:e="",props:a,parserOptions:l})=>{if(!e)return"";let o=S("currency",l),{ratio:i,currency:s}=o,u=$(o,["ratio","currency"]),n=(a==null?void 0:a.currency)||{},{ratio:m=i||1,currency:y=s}=n,_=$(n,["ratio","currency"]);return new Intl.NumberFormat(e,O(K(O({},u),{style:"currency",currency:y}),_)).format(m*(r||t))},Ve=r=>typeof r=="string"&&/{{(?:(?!{{|}}).)+}}/.test(r),N=r=>typeof r=="string"?r.replace(/\\(?=:|;|{|})/g,""):r,Re=({value:r,props:t,payload:e,parserOptions:a,locale:l})=>`${r}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,o=>{let i=N(`${o.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),s=e==null?void 0:e[i],[,u=""]=o.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;}])*)(?=\s*(?:;|}}$))/i)||[];u=u||(e==null?void 0:e.default)||"";let[,n=""]=o.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(s===void 0&&n!=="ne")return u;let m=!!n,{customModifiers:y}=a||{},_=O(O({},te),y||{});n=Object.keys(_).includes(n)?n:"eq";let V=_[n],L=(o.match(/[^\s:;{](?:[^;]|\\[;])+[^:;}]/gi)||[]).reduce((h,k,R)=>{if(R>0){let g=N(`${k.match(/(?:(?:\\:)|[^:])+/)}`.trim()),w=`${k.match(/(?:(?:\\:)|[^:])+$/)}`.trimStart();if(g&&g!=="default"&&w)return[...h,{key:g,value:w}]}return h},[]);return!m&&!L.length?s:V({value:s,options:L,props:t,defaultValue:u,locale:l,parserOptions:a})}),ie=({value:r,props:t,payload:e,parserOptions:a,locale:l})=>{if(Ve(r)){let o=Re({value:r,payload:e,props:t,parserOptions:a,locale:l});return ie({value:o,payload:e,props:t,parserOptions:a,locale:l})}else return N(r)},Ae=r=>({parse:(t,[e,a],l,o)=>(e!=null&&e.default&&t===void 0&&(t=e.default),t===void 0&&(t=o),ie({value:t,payload:e,props:a,parserOptions:r,locale:l}))}),je=Ae,De=Object.defineProperty,Ie=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,G=(r,t,e)=>t in r?De(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Se=(r,t)=>{for(var e in t||(t={}))se.call(t,e)&&G(r,e,t[e]);if(x)for(var e of x(t))ne.call(t,e)&&G(r,e,t[e]);return r},Fe=(r,t)=>Ie(r,xe(t)),Ce=(r,t)=>{var e={};for(var a in r)se.call(r,a)&&t.indexOf(a)<0&&(e[a]=r[a]);if(r!=null&&x)for(var a of x(r))t.indexOf(a)<0&&ne.call(r,a)&&(e[a]=r[a]);return e},J=r=>{var t=r,{parserOptions:e={}}=t,a=Ce(t,["parserOptions"]);return Fe(Se({},a),{parser:je(e)})},Ne=class extends he{constructor(t){super(t&&J(t)),this.loadConfig=e=>super.configLoader(J(e))}},Ke=Ne;const Me="English",ze="Francais",Q={en:Me,fr:ze},He={log:{level:"error"},translations:{en:{lang:Q},fr:{lang:Q}},loaders:[{locale:"en",key:"general",loader:async()=>(await d(()=>import("./general.97c7a5c3.js"),[],import.meta.url)).default},{locale:"en",key:"about",loader:async()=>(await d(()=>import("./about.12721109.js"),[],import.meta.url)).default},{locale:"en",key:"home",loader:async()=>(await d(()=>import("./home.e2722f08.js"),[],import.meta.url)).default},{locale:"en",key:"login",loader:async()=>(await d(()=>import("./login.d1c50e06.js"),[],import.meta.url)).default},{locale:"en",key:"logout",loader:async()=>(await d(()=>import("./logout.0409f1b0.js"),[],import.meta.url)).default},{locale:"en",key:"signup",loader:async()=>(await d(()=>import("./signup.7adf8fed.js"),[],import.meta.url)).default},{locale:"en",key:"forgot-password",loader:async()=>(await d(()=>import("./forgot-password.2604dae1.js"),[],import.meta.url)).default},{locale:"en",key:"forgot-password-token",loader:async()=>(await d(()=>import("./forgot-password-token.e97e7a59.js"),[],import.meta.url)).default},{locale:"en",key:"user",loader:async()=>(await d(()=>import("./user.c4a32993.js"),[],import.meta.url)).default},{locale:"en",key:"validation",loader:async()=>(await d(()=>import("./validation.38c0b508.js"),[],import.meta.url)).default},{locale:"fr",key:"general",loader:async()=>(await d(()=>import("./general.3a3395a9.js"),[],import.meta.url)).default},{locale:"fr",key:"about",loader:async()=>(await d(()=>import("./about.644695f1.js"),[],import.meta.url)).default},{locale:"fr",key:"home",loader:async()=>(await d(()=>import("./home.ec950bea.js"),[],import.meta.url)).default},{locale:"fr",key:"login",loader:async()=>(await d(()=>import("./login.6114d837.js"),[],import.meta.url)).default},{locale:"fr",key:"logout",loader:async()=>(await d(()=>import("./logout.db8b5a69.js"),[],import.meta.url)).default},{locale:"fr",key:"signup",loader:async()=>(await d(()=>import("./signup.60c6c763.js"),[],import.meta.url)).default},{locale:"fr",key:"forgot-password",loader:async()=>(await d(()=>import("./forgot-password.5e1987bc.js"),[],import.meta.url)).default},{locale:"fr",key:"forgot-password-token",loader:async()=>(await d(()=>import("./forgot-password-token.c1805068.js"),[],import.meta.url)).default},{locale:"fr",key:"user",loader:async()=>(await d(()=>import("./user.b8b1ac19.js"),[],import.meta.url)).default},{locale:"fr",key:"validation",loader:async()=>(await d(()=>import("./validation.df3c52cd.js"),[],import.meta.url)).default}]},{t:Ue,loading:qe,locales:Xe,locale:Ye,translations:Ze,loadTranslations:ea,addTranslations:aa,setLocale:ta,setRoute:ra}=new Ke(He);qe.subscribe(r=>r&&console.log("Loading translations..."));export{aa as a,ta as b,Xe as c,Ye as l,ra as s,Ue as t};
