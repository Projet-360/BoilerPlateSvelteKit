import{S as ie,i as se,s as ue,k as d,a as O,q as P,a1 as ce,l as _,h as u,c as A,m as b,r as j,n as v,C as r,b as J,E as ee,J as de,o as _e,H as fe,a2 as D,I as te,D as C,a3 as he,K as pe,L as me}from"../chunks/index.958f6a32.js";import{b as ve,u as be}from"../chunks/auth.49264929.js";import{n as Ee}from"../chunks/notificationStore.6f5071e2.js";const Ne=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function ae(o,s,t){const l=o.slice();return l[7]=s[t],l[8]=s,l[9]=t,l}function re(o){let s,t,l,f,E,c,T,h,i,e,n,a,p,N,U,g,I,R,L,V,M,q,H,k,w,z,F,K;function le(){o[2].call(c,o[8],o[9])}function oe(){o[3].call(n,o[8],o[9])}function G(){o[4].call(g,o[8],o[9])}function ne(){return o[5](o[7])}return{c(){s=d("div"),t=d("form"),l=d("label"),f=P("Nom d'utilisateur"),E=O(),c=d("input"),T=O(),h=d("label"),i=P("Email"),e=O(),n=d("input"),a=O(),p=d("label"),N=P("Rôle"),U=O(),g=d("select"),I=d("option"),R=P("Utilisateur"),L=d("option"),V=P("Admin"),M=d("option"),q=P("Modérateur"),H=O(),k=d("button"),w=P("Mettre à jour"),z=O(),this.h()},l(S){s=_(S,"DIV",{class:!0});var y=b(s);t=_(y,"FORM",{});var m=b(t);l=_(m,"LABEL",{for:!0});var Q=b(l);f=j(Q,"Nom d'utilisateur"),Q.forEach(u),E=A(m),c=_(m,"INPUT",{id:!0,type:!0}),T=A(m),h=_(m,"LABEL",{for:!0});var W=b(h);i=j(W,"Email"),W.forEach(u),e=A(m),n=_(m,"INPUT",{id:!0,type:!0}),a=A(m),p=_(m,"LABEL",{for:!0});var X=b(p);N=j(X,"Rôle"),X.forEach(u),U=A(m),g=_(m,"SELECT",{id:!0});var B=b(g);I=_(B,"OPTION",{});var Y=b(I);R=j(Y,"Utilisateur"),Y.forEach(u),L=_(B,"OPTION",{});var Z=b(L);V=j(Z,"Admin"),Z.forEach(u),M=_(B,"OPTION",{});var $=b(M);q=j($,"Modérateur"),$.forEach(u),B.forEach(u),H=A(m),k=_(m,"BUTTON",{type:!0});var x=b(k);w=j(x,"Mettre à jour"),x.forEach(u),m.forEach(u),z=A(y),y.forEach(u),this.h()},h(){v(l,"for","username"),v(c,"id","username"),v(c,"type","text"),v(h,"for","email"),v(n,"id","email"),v(n,"type","email"),v(p,"for","role"),I.__value="user",I.value=I.__value,L.__value="admin",L.value=L.__value,M.__value="moderator",M.value=M.__value,v(g,"id","role"),o[7].role===void 0&&fe(G),v(k,"type","submit"),v(s,"class","page-container")},m(S,y){J(S,s,y),r(s,t),r(t,l),r(l,f),r(t,E),r(t,c),D(c,o[7].username),r(t,T),r(t,h),r(h,i),r(t,e),r(t,n),D(n,o[7].email),r(t,a),r(t,p),r(p,N),r(t,U),r(t,g),r(g,I),r(I,R),r(g,L),r(L,V),r(g,M),r(M,q),te(g,o[7].role,!0),r(t,H),r(t,k),r(k,w),r(s,z),F||(K=[C(c,"input",le),C(n,"input",oe),C(g,"change",G),C(t,"submit",he(ne))],F=!0)},p(S,y){o=S,y&1&&c.value!==o[7].username&&D(c,o[7].username),y&1&&n.value!==o[7].email&&D(n,o[7].email),y&1&&te(g,o[7].role)},d(S){S&&u(s),F=!1,pe(K)}}}function ge(o){let s,t,l,f,E,c,T,h=o[0],i=[];for(let e=0;e<h.length;e+=1)i[e]=re(ae(o,h,e));return{c(){s=d("meta"),t=O(),l=d("div"),f=d("div"),E=d("h1"),c=P("Tableau de bord administrateur"),T=O();for(let e=0;e<i.length;e+=1)i[e].c();this.h()},l(e){const n=ce("svelte-jic9p0",document.head);s=_(n,"META",{name:!0,content:!0}),n.forEach(u),t=A(e),l=_(e,"DIV",{class:!0});var a=b(l);f=_(a,"DIV",{class:!0});var p=b(f);E=_(p,"H1",{});var N=b(E);c=j(N,"Tableau de bord administrateur"),N.forEach(u),T=A(p);for(let U=0;U<i.length;U+=1)i[U].l(p);p.forEach(u),a.forEach(u),this.h()},h(){document.title="exemple Page",v(s,"name","description"),v(s,"content","meta description for about page."),v(f,"class","page-container"),v(l,"class","page")},m(e,n){r(document.head,s),J(e,t,n),J(e,l,n),r(l,f),r(f,E),r(E,c),r(f,T);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(f,null)},p(e,[n]){if(n&3){h=e[0];let a;for(a=0;a<h.length;a+=1){const p=ae(e,h,a);i[a]?i[a].p(p,n):(i[a]=re(p),i[a].c(),i[a].m(f,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=h.length}},i:ee,o:ee,d(e){u(s),e&&u(t),e&&u(l),de(i,e)}}}function Te(o,s,t){let l=[];function f(){ve().then(e=>{t(0,l=e)}).catch(e=>{console.error("Erreur lors de la récupération des utilisateurs:",e)})}_e(async()=>{try{f()}catch(e){console.error("Error:",e)}});async function E(e){const n=l.find(a=>a._id===e);if(!n){console.error("Utilisateur à mettre à jour introuvable");return}try{const{user:a,notification:p}=await be(e,n),N=l.findIndex(U=>U._id===e);t(0,l[N]=a,l),Ee.addNotification("Utilisateur mis à jour avec succès","success")}catch(a){console.error("Error:",a)}}function c(e,n){e[n].username=this.value,t(0,l)}function T(e,n){e[n].email=this.value,t(0,l)}function h(e,n){e[n].role=me(this),t(0,l)}return[l,E,c,T,h,e=>E(e._id)]}class Ie extends ie{constructor(s){super(),se(this,s,Te,ge,ue,{})}}export{Ie as component,Ne as universal};
