import{w as l}from"./index.d28b6c62.js";async function y({url:n,method:o="GET",headers:i=null,body:e=null,credentials:f=null,handleSuccess:u=null,handleError:s=null}){try{const t={method:o};i&&(t.headers=i),e&&(t.body=JSON.stringify(e),(!i||!i["Content-Type"])&&(t.headers={...t.headers||{},"Content-Type":"application/json"})),f&&(t.credentials=f);const c=await fetch(n,t);if(c.ok){const a=await c.json();return u&&u(a),a}else{const a=await c.json();throw s&&s(a),new Error(a.message||"Erreur du serveur")}}catch(t){throw s&&s(t),t}}const p=[],r=l(p);function w(n,o){const i=new Date().getTime();r.update(e=>[...e,{id:i,message:n,type:o}])}function b(n){r.update(o=>o.filter(i=>i.id!==n))}const d={subscribe:r.subscribe,addNotification:w,removeNotification:b};export{y as a,d as n};
