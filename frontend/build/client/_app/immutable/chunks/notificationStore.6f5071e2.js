import{w as u}from"./index.d28b6c62.js";async function y({url:o,method:n="GET",headers:i=null,body:s=null,credentials:f=null,handleSuccess:l=null,handleError:e=null}){try{const t={method:n};i&&(t.headers=i),s&&(t.body=JSON.stringify(s),(!i||!i["Content-Type"])&&(t.headers={...t.headers||{},"Content-Type":"application/json"})),f&&(t.credentials=f);const c=await fetch(o,t);if(c.ok){const a=await c.json();return l&&l(a),a}else{const a=await c.json();throw e&&e(a),new Error(a.message||"Erreur du serveur")}}catch(t){throw e&&e(t),t}}const d="http://localhost:2000",p=[],r=u(p);function w(o,n){const i=new Date().getTime();r.update(s=>[...s,{id:i,message:o,type:n}])}function b(o){r.update(n=>n.filter(i=>i.id!==o))}const N={subscribe:r.subscribe,addNotification:w,removeNotification:b};export{d as B,y as a,N as n};
