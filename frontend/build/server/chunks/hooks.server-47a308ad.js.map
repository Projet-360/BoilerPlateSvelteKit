{"version":3,"file":"hooks.server-47a308ad.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport dotenv from \"dotenv\";\ndotenv.config();\nasync function verifyToken(token) {\n  try {\n    const decoded = jwt.verify(token, process.env.VITE_SECRETKEY);\n    return decoded;\n  } catch (error) {\n    console.error(\"JWT Verification Error:\", error);\n    throw error;\n  }\n}\nasync function handle({ event, resolve }) {\n  const cookies = event.cookies.get(\"token\");\n  if (cookies) {\n    const user = await verifyToken(cookies);\n    console.log(user);\n    console.log(\"user du hook.server\", cookies);\n    console.log(user);\n    if (user) {\n      event.locals.user = user;\n      console.log(\"User est ajout√© aux locals:\", event.locals.user);\n    }\n  }\n  const response = await resolve(event);\n  return response;\n}\nexport {\n  handle\n};\n"],"names":[],"mappings":";;;AAEA,MAAM,CAAC,MAAM,EAAE,CAAC;AAChB,eAAe,WAAW,CAAC,KAAK,EAAE;AAClC,EAAE,IAAI;AACN,IAAI,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAClE,IAAI,OAAO,OAAO,CAAC;AACnB,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAC;AACpD,IAAI,MAAM,KAAK,CAAC;AAChB,GAAG;AACH,CAAC;AACD,eAAe,MAAM,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;AAC1C,EAAE,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC7C,EAAE,IAAI,OAAO,EAAE;AACf,IAAI,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,CAAC;AAC5C,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACtB,IAAI,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;AAChD,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACtB,IAAI,IAAI,IAAI,EAAE;AACd,MAAM,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;AAC/B,MAAM,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACpE,KAAK;AACL,GAAG;AACH,EAAE,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC;AACxC,EAAE,OAAO,QAAQ,CAAC;AAClB;;;;"}